(()=>{"use strict";var e={569:function(e,t,i){var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&n(t,e,i);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});var r=a(i(996)),l=function(){function e(e){this.nodeMapByLabel={},this.activeNode=null,this.elem=e,this.rootNode=new r.default(e),this.build(e,this.rootNode),this.activateNode(this.rootNode)}return e.prototype.build=function(e,t){for(var i=0;i<e.children.length;i+=1){var n=e.children[i];if(r.default.hasNavTypeAttribute(n)){var o=new r.default(n,t);this.nodeMapByLabel[o.label]=o,o.type!==r.NavItemTypes.Item&&this.build(n,o)}else this.build(n,t)}},e.prototype.rebuild=function(){var e,t=null===(e=this.activeNode)||void 0===e?void 0:e.label;this.nodeMapByLabel={},this.rootNode=new r.default(this.elem),this.build(this.elem,this.rootNode),this.activateNode(t)},e.prototype.activateNode=function(e){var t,i,n,o=e instanceof r.default?e:this.nodeMapByLabel[e];if(o&&o.label!==(null===(t=this.activeNode)||void 0===t?void 0:t.label))if(o.hasType(r.NavItemTypes.Item))null===(i=this.activeNode)||void 0===i||i.deactivate(),this.activeNode=o,null===(n=this.activeNode)||void 0===n||n.activate();else{var a=o.getFirstChildNode();this.activateNode(a)}},e.prototype.deactivateNode=function(){var e;null===(e=this.activeNode)||void 0===e||e.deactivate(),this.activeNode=null},e.prototype.move=function(e,t,i){if(e&&e.parent){var n=e.parent;if(n.hasType(t)){var o=n.getChildNode(e.index+i);this.activateNode(o)}else this.move(n,t,i)}},e.prototype.up=function(){this.move(this.activeNode,r.NavItemTypes.Row,r.Offset.Prev)},e.prototype.down=function(){this.move(this.activeNode,r.NavItemTypes.Row,r.Offset.Next)},e.prototype.left=function(){this.move(this.activeNode,r.NavItemTypes.Column,r.Offset.Prev)},e.prototype.right=function(){this.move(this.activeNode,r.NavItemTypes.Column,r.Offset.Next)},e}();t.default=l},996:(e,t)=>{var i,n,o;Object.defineProperty(t,"__esModule",{value:!0}),t.Offset=t.NavItemDataAttrs=t.NavItemTypes=void 0,function(e){e.Row="row",e.Column="column",e.Item="item"}(i=t.NavItemTypes||(t.NavItemTypes={})),function(e){e.NavType="nav",e.NavLabel="navLabel",e.ActiveNavItem="activeNavItem"}(n=t.NavItemDataAttrs||(t.NavItemDataAttrs={})),function(e){e[e.Next=1]="Next",e[e.Prev=-1]="Prev"}(o=t.Offset||(t.Offset={}));var a=function(){function e(e,t,i,a){void 0===t&&(t=null),void 0===i&&(i=0),void 0===a&&(a=0),this.elem=e,this.parent=t,this.layer=i,this.index=a,this.children=[],t&&(this.index=t.children.length,this.layer=t.layer+o.Next||i,t.children.push(this)),this.elem.tabIndex=-1,this.elem.dataset[n.NavLabel]=this.elem.dataset[n.NavLabel]||"layer: "+this.layer+" Index: "+this.index}return Object.defineProperty(e.prototype,"type",{get:function(){return this.elem.dataset[n.NavType]||null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"label",{get:function(){return this.elem.dataset[n.NavLabel]||null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isActive",{get:function(){return Boolean(this.elem.dataset[n.ActiveNavItem])},enumerable:!1,configurable:!0}),e.prototype.hasType=function(e){return this.type===e},e.prototype.getChildNode=function(e){return this.children[e]||null},e.prototype.getFirstChildNode=function(){return this.getChildNode(0)},e.hasNavTypeAttribute=function(e){return Boolean(e.dataset[n.NavType])},e.prototype.activate=function(){this.isActive||this.type!==i.Item||(this.elem.dataset[n.ActiveNavItem]="true",this.elem.focus(),this.elem.scrollIntoView({block:"center",inline:"center",behavior:"smooth"}))},e.prototype.deactivate=function(){this.isActive&&(this.elem.blur(),delete this.elem.dataset[n.ActiveNavItem])},e}();t.default=a},124:function(e,t,i){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(i(569)),a=n(i(105)),r=n(i(522)),l=n(i(876)),s=function(){function e(){this.navTree=null,this.navTreeHtmlObserver=new a.default,this.navTreeClickObserver=new r.default,this.navTreeKeyPressObserver=new l.default}return e.prototype.observe=function(e){e.isEqualNode(this.navTree&&this.navTree.elem)||(this.navTree=new o.default(e),this.navTreeHtmlObserver.watch(this.navTree),this.navTreeClickObserver.watch(this.navTree),this.navTreeKeyPressObserver.watch(this.navTree))},e.prototype.activateNavItem=function(e){var t;null===(t=this.navTree)||void 0===t||t.activateNode(e)},e.prototype.deactivateNavItem=function(){var e;null===(e=this.navTree)||void 0===e||e.deactivateNode()},e}();t.default=s},607:function(e,t,i){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(i(124));"undefined"!=typeof window&&(window.HtmlDomNavigator=new o.default)},522:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=i(996);t.default=function(){var e=this;this.observable=null,this.watch=function(t){e.unwatch(),e.observable=t,window.onclick=e.onClickEventDetected},this.onClickEventDetected=function(t){var i,o=t.target.closest('[data-nav="'+n.NavItemTypes.Item+'"]');o&&(null===(i=e.observable)||void 0===i||i.activateNode(o.dataset[n.NavItemDataAttrs.NavLabel]))},this.unwatch=function(){window.onclick=null,e.observable=null}}},105:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=function(){var e=this;this.observer=null,this.observable=null,this.observerConfig={attributes:!0,childList:!0,subtree:!0,attributeFilter:["data-nav"]},this.watch=function(t){e.unwatch(),e.observable=t,e.observer=new MutationObserver(e.onHtmlChangeDetected),e.observer.observe(e.observable.elem,e.observerConfig)},this.onHtmlChangeDetected=function(){var t;null===(t=e.observable)||void 0===t||t.rebuild()},this.unwatch=function(){var t;null===(t=e.observer)||void 0===t||t.disconnect(),e.observer=null,e.observable=null}}},876:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=function(){var e=this;this.observable=null,this.controls={ArrowUp:function(){var t;return null===(t=e.observable)||void 0===t?void 0:t.up()},ArrowDown:function(){var t;return null===(t=e.observable)||void 0===t?void 0:t.down()},ArrowLeft:function(){var t;return null===(t=e.observable)||void 0===t?void 0:t.left()},ArrowRight:function(){var t;return null===(t=e.observable)||void 0===t?void 0:t.up()}},this.watch=function(t){e.unwatch(),e.observable=t,window.onkeypress=e.onKeyEventDetected},this.onKeyEventDetected=function(t){var i=e.controls[t.key];i&&i()},this.unwatch=function(){window.onkeypress=null,e.observable=null}}}},t={};!function i(n){if(t[n])return t[n].exports;var o=t[n]={exports:{}};return e[n].call(o.exports,o,o.exports,i),o.exports}(607)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9odG1sLWRvbS1uYXZpZ2F0b3IvLi9zcmMvTmF2VHJlZS50cyIsIndlYnBhY2s6Ly9odG1sLWRvbS1uYXZpZ2F0b3IvLi9zcmMvTmF2VHJlZU5vZGUudHMiLCJ3ZWJwYWNrOi8vaHRtbC1kb20tbmF2aWdhdG9yLy4vc3JjL05hdmlnYXRvci50cyIsIndlYnBhY2s6Ly9odG1sLWRvbS1uYXZpZ2F0b3IvLi9zcmMvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vaHRtbC1kb20tbmF2aWdhdG9yLy4vc3JjL29ic2VydmVycy9OYXZUcmVlQ2xpY2tPYnNlcnZlci50cyIsIndlYnBhY2s6Ly9odG1sLWRvbS1uYXZpZ2F0b3IvLi9zcmMvb2JzZXJ2ZXJzL05hdlRyZWVIdG1sT2JzZXJ2ZXIudHMiLCJ3ZWJwYWNrOi8vaHRtbC1kb20tbmF2aWdhdG9yLy4vc3JjL29ic2VydmVycy9OYXZUcmVlS2V5UHJlc3NPYnNlcnZlci50cyIsIndlYnBhY2s6Ly9odG1sLWRvbS1uYXZpZ2F0b3Ivd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vaHRtbC1kb20tbmF2aWdhdG9yL3dlYnBhY2svc3RhcnR1cCJdLCJuYW1lcyI6WyJlbGVtIiwibm9kZU1hcEJ5TGFiZWwiLCJhY3RpdmVOb2RlIiwidGhpcyIsInJvb3ROb2RlIiwiYnVpbGQiLCJhY3RpdmF0ZU5vZGUiLCJwYXJlbnQiLCJpbmRleCIsImNoaWxkcmVuIiwibGVuZ3RoIiwiY2hpbGRFbGVtIiwiaGFzTmF2VHlwZUF0dHJpYnV0ZSIsImNoaWxkTm9kZSIsImxhYmVsIiwidHlwZSIsIk5hdkl0ZW1UeXBlcyIsIkl0ZW0iLCJyZWJ1aWxkIiwicHJldkFjdGl2ZU5hdkl0ZW1MYWJlbCIsIm5vZGUiLCJjdXJyZW50Tm9kZSIsImhhc1R5cGUiLCJkZWFjdGl2YXRlIiwiYWN0aXZhdGUiLCJnZXRGaXJzdENoaWxkTm9kZSIsImRlYWN0aXZhdGVOb2RlIiwibW92ZSIsIm9mZnNldCIsInBhcmVudE5vZGUiLCJuZXh0Tm9kZSIsImdldENoaWxkTm9kZSIsInVwIiwiUm93IiwiT2Zmc2V0IiwiUHJldiIsImRvd24iLCJOZXh0IiwibGVmdCIsIkNvbHVtbiIsInJpZ2h0IiwiTmF2SXRlbURhdGFBdHRycyIsImxheWVyIiwicHVzaCIsInRhYkluZGV4IiwiZGF0YXNldCIsIk5hdkxhYmVsIiwiTmF2VHlwZSIsIkJvb2xlYW4iLCJBY3RpdmVOYXZJdGVtIiwiaXNBY3RpdmUiLCJmb2N1cyIsInNjcm9sbEludG9WaWV3IiwiYmxvY2siLCJpbmxpbmUiLCJiZWhhdmlvciIsImJsdXIiLCJuYXZUcmVlIiwibmF2VHJlZUh0bWxPYnNlcnZlciIsIm5hdlRyZWVDbGlja09ic2VydmVyIiwibmF2VHJlZUtleVByZXNzT2JzZXJ2ZXIiLCJvYnNlcnZlIiwiaXNFcXVhbE5vZGUiLCJ3YXRjaCIsImFjdGl2YXRlTmF2SXRlbSIsImRlYWN0aXZhdGVOYXZJdGVtIiwid2luZG93IiwiSHRtbERvbU5hdmlnYXRvciIsIm9ic2VydmFibGUiLCJ1bndhdGNoIiwib25jbGljayIsIm9uQ2xpY2tFdmVudERldGVjdGVkIiwiZXZlbnQiLCJ0YXJnZXQiLCJjbG9zZXN0Iiwib2JzZXJ2ZXIiLCJvYnNlcnZlckNvbmZpZyIsImF0dHJpYnV0ZXMiLCJjaGlsZExpc3QiLCJzdWJ0cmVlIiwiYXR0cmlidXRlRmlsdGVyIiwiTXV0YXRpb25PYnNlcnZlciIsIm9uSHRtbENoYW5nZURldGVjdGVkIiwiZGlzY29ubmVjdCIsImNvbnRyb2xzIiwiQXJyb3dVcCIsIkFycm93RG93biIsIkFycm93TGVmdCIsIkFycm93UmlnaHQiLCJvbmtleXByZXNzIiwib25LZXlFdmVudERldGVjdGVkIiwiaGFuZGxlciIsImtleSIsIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJfX3dlYnBhY2tfbW9kdWxlc19fIiwiY2FsbCJdLCJtYXBwaW5ncyI6IjRuQkFBQSxnQkFLQSxh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Q0QsR0FDRkEsS0FJRyxLQUFBdEIsUUFBVSxXQUNmSCxPQUFPdUIsV0FBYSxLQUNwQixFQUFLckIsV0FBYSxTQy9CbEJ5QixFQUEyQixJQUcvQixTQUFTQyxFQUFvQkMsR0FFNUIsR0FBR0YsRUFBeUJFLEdBQzNCLE9BQU9GLEVBQXlCRSxHQUFVQyxRQUczQyxJQUFJQyxFQUFTSixFQUF5QkUsR0FBWSxDQUdqREMsUUFBUyxJQU9WLE9BSEFFLEVBQW9CSCxHQUFVSSxLQUFLRixFQUFPRCxRQUFTQyxFQUFRQSxFQUFPRCxRQUFTRixHQUdwRUcsRUFBT0QsUUNqQmZGLENBQW9CLE0iLCJmaWxlIjoiYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IE5hdlRyZWVOb2RlLCB7IE5hdkl0ZW1UeXBlcywgT2Zmc2V0IH0gZnJvbSAnLi9OYXZUcmVlTm9kZSdcbmltcG9ydCB7IElOYXZUcmVlS2V5UHJlc3NPYnNlcnZhYmxlIH0gZnJvbSAnLi9vYnNlcnZlcnMvTmF2VHJlZUtleVByZXNzT2JzZXJ2ZXInXG5pbXBvcnQgeyBJTmF2VHJlZUh0bWxPYnNlcnZhYmxlIH0gZnJvbSAnLi9vYnNlcnZlcnMvTmF2VHJlZUh0bWxPYnNlcnZlcidcbmltcG9ydCB7IElOYXZUcmVlQ2xpY2tPYnNlcnZhYmxlIH0gZnJvbSAnLi9vYnNlcnZlcnMvTmF2VHJlZUNsaWNrT2JzZXJ2ZXInXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE5hdlRyZWUgaW1wbGVtZW50cyBJTmF2VHJlZUh0bWxPYnNlcnZhYmxlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIElOYXZUcmVlS2V5UHJlc3NPYnNlcnZhYmxlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIElOYXZUcmVlQ2xpY2tPYnNlcnZhYmxlIHtcbiAgcHVibGljIGVsZW06IEhUTUxFbGVtZW50XG4gIHB1YmxpYyByb290Tm9kZTogTmF2VHJlZU5vZGVcbiAgcHVibGljIG5vZGVNYXBCeUxhYmVsOiBSZWNvcmQ8c3RyaW5nLCBOYXZUcmVlTm9kZT4gPSB7fVxuICBwdWJsaWMgYWN0aXZlTm9kZTogTmF2VHJlZU5vZGUgfCBudWxsID0gbnVsbFxuXG4gIGNvbnN0cnVjdG9yKGVsZW06IEhUTUxFbGVtZW50KSB7XG4gICAgdGhpcy5lbGVtID0gZWxlbVxuICAgIHRoaXMucm9vdE5vZGUgPSBuZXcgTmF2VHJlZU5vZGUoZWxlbSlcbiAgICB0aGlzLmJ1aWxkKGVsZW0sIHRoaXMucm9vdE5vZGUpXG4gICAgdGhpcy5hY3RpdmF0ZU5vZGUodGhpcy5yb290Tm9kZSlcbiAgfVxuXG4gIHByb3RlY3RlZCBidWlsZChlbGVtOiBIVE1MRWxlbWVudCwgcGFyZW50OiBOYXZUcmVlTm9kZSk6IHZvaWQge1xuICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBlbGVtLmNoaWxkcmVuLmxlbmd0aDsgaW5kZXggKz0gMSkge1xuXG4gICAgICBjb25zdCBjaGlsZEVsZW0gPSBlbGVtLmNoaWxkcmVuW2luZGV4XSBhcyBIVE1MRWxlbWVudFxuICAgICAgaWYgKE5hdlRyZWVOb2RlLmhhc05hdlR5cGVBdHRyaWJ1dGUoY2hpbGRFbGVtKSkge1xuICAgICAgICBjb25zdCBjaGlsZE5vZGUgPSBuZXcgTmF2VHJlZU5vZGUoY2hpbGRFbGVtLCBwYXJlbnQpXG4gICAgICAgIHRoaXMubm9kZU1hcEJ5TGFiZWxbY2hpbGROb2RlLmxhYmVsIGFzIHN0cmluZ10gPSBjaGlsZE5vZGVcblxuICAgICAgICBpZiAoY2hpbGROb2RlLnR5cGUgIT09IE5hdkl0ZW1UeXBlcy5JdGVtKSB7XG4gICAgICAgICAgdGhpcy5idWlsZChjaGlsZEVsZW0sIGNoaWxkTm9kZSlcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5idWlsZChjaGlsZEVsZW0sIHBhcmVudClcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwdWJsaWMgcmVidWlsZCgpOiB2b2lkIHtcbiAgICBjb25zdCBwcmV2QWN0aXZlTmF2SXRlbUxhYmVsID0gdGhpcy5hY3RpdmVOb2RlPy5sYWJlbCBhcyBzdHJpbmdcbiAgICB0aGlzLm5vZGVNYXBCeUxhYmVsID0ge31cbiAgICB0aGlzLnJvb3ROb2RlID0gbmV3IE5hdlRyZWVOb2RlKHRoaXMuZWxlbSlcbiAgICB0aGlzLmJ1aWxkKHRoaXMuZWxlbSwgdGhpcy5yb290Tm9kZSlcbiAgICB0aGlzLmFjdGl2YXRlTm9kZShwcmV2QWN0aXZlTmF2SXRlbUxhYmVsKVxuICB9XG5cbiAgcHVibGljIGFjdGl2YXRlTm9kZShub2RlOiBzdHJpbmcgfCBOYXZUcmVlTm9kZSB8IG51bGwpOiB2b2lkIHtcbiAgICBjb25zdCBjdXJyZW50Tm9kZSA9IG5vZGUgaW5zdGFuY2VvZiBOYXZUcmVlTm9kZSA/IG5vZGUgOiB0aGlzLm5vZGVNYXBCeUxhYmVsW25vZGUgYXMgc3RyaW5nXVxuICAgIGlmICghY3VycmVudE5vZGUgfHwgY3VycmVudE5vZGUubGFiZWwgPT09IHRoaXMuYWN0aXZlTm9kZT8ubGFiZWwpIHtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGlmIChjdXJyZW50Tm9kZS5oYXNUeXBlKE5hdkl0ZW1UeXBlcy5JdGVtKSkge1xuICAgICAgdGhpcy5hY3RpdmVOb2RlPy5kZWFjdGl2YXRlKClcbiAgICAgIHRoaXMuYWN0aXZlTm9kZSA9IGN1cnJlbnROb2RlXG4gICAgICB0aGlzLmFjdGl2ZU5vZGU/LmFjdGl2YXRlKClcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgY2hpbGROb2RlID0gY3VycmVudE5vZGUuZ2V0Rmlyc3RDaGlsZE5vZGUoKVxuICAgICAgdGhpcy5hY3RpdmF0ZU5vZGUoY2hpbGROb2RlKVxuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBkZWFjdGl2YXRlTm9kZSgpOiB2b2lkIHtcbiAgICB0aGlzLmFjdGl2ZU5vZGU/LmRlYWN0aXZhdGUoKVxuICAgIHRoaXMuYWN0aXZlTm9kZSA9IG51bGxcbiAgfVxuXG4gIHByb3RlY3RlZCBtb3ZlKG5vZGU6IE5hdlRyZWVOb2RlIHwgbnVsbCwgdHlwZTogTmF2SXRlbVR5cGVzLCBvZmZzZXQ6IG51bWJlcik6IHZvaWQge1xuICAgIGlmICghbm9kZSB8fCAhbm9kZS5wYXJlbnQpIHtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGNvbnN0IHBhcmVudE5vZGUgPSBub2RlLnBhcmVudFxuICAgIGlmIChwYXJlbnROb2RlLmhhc1R5cGUodHlwZSkpIHtcbiAgICAgIGNvbnN0IG5leHROb2RlID0gcGFyZW50Tm9kZS5nZXRDaGlsZE5vZGUobm9kZS5pbmRleCArIG9mZnNldClcbiAgICAgIHRoaXMuYWN0aXZhdGVOb2RlKG5leHROb2RlKVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLm1vdmUocGFyZW50Tm9kZSwgdHlwZSwgb2Zmc2V0KVxuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyB1cCgpOiB2b2lkIHtcbiAgICB0aGlzLm1vdmUodGhpcy5hY3RpdmVOb2RlLCBOYXZJdGVtVHlwZXMuUm93LCBPZmZzZXQuUHJldilcbiAgfVxuXG4gIHB1YmxpYyBkb3duKCk6IHZvaWQge1xuICAgIHRoaXMubW92ZSh0aGlzLmFjdGl2ZU5vZGUsIE5hdkl0ZW1UeXBlcy5Sb3csIE9mZnNldC5OZXh0KVxuICB9XG5cbiAgcHVibGljIGxlZnQoKTogdm9pZCB7XG4gICAgdGhpcy5tb3ZlKHRoaXMuYWN0aXZlTm9kZSwgTmF2SXRlbVR5cGVzLkNvbHVtbiwgT2Zmc2V0LlByZXYpXG4gIH1cblxuICBwdWJsaWMgcmlnaHQoKTogdm9pZCB7XG4gICAgdGhpcy5tb3ZlKHRoaXMuYWN0aXZlTm9kZSwgTmF2SXRlbVR5cGVzLkNvbHVtbiwgT2Zmc2V0Lk5leHQpXG4gIH1cbn1cbiIsImV4cG9ydCBlbnVtIE5hdkl0ZW1UeXBlcyB7XG4gIFJvdyA9ICdyb3cnLFxuICBDb2x1bW4gPSAnY29sdW1uJyxcbiAgSXRlbSA9ICdpdGVtJyxcbn1cblxuZXhwb3J0IGVudW0gTmF2SXRlbURhdGFBdHRycyB7XG4gIE5hdlR5cGUgPSAnbmF2JyxcbiAgTmF2TGFiZWwgPSAnbmF2TGFiZWwnLFxuICBBY3RpdmVOYXZJdGVtID0gJ2FjdGl2ZU5hdkl0ZW0nLFxufVxuXG5leHBvcnQgZW51bSBPZmZzZXQge1xuICBOZXh0ID0gMSxcbiAgUHJldiA9IC0xLFxufVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBOYXZUcmVlTm9kZSB7XG4gIHByaXZhdGUgY2hpbGRyZW46IE5hdlRyZWVOb2RlW10gPSBbXVxuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHB1YmxpYyBlbGVtOiBIVE1MRWxlbWVudCxcbiAgICBwdWJsaWMgcGFyZW50OiBOYXZUcmVlTm9kZSB8IG51bGwgPSBudWxsLFxuICAgIHB1YmxpYyBsYXllcjogbnVtYmVyID0gMCxcbiAgICBwdWJsaWMgaW5kZXg6IG51bWJlciA9IDAsXG4gICkge1xuICAgIGlmIChwYXJlbnQpIHtcbiAgICAgIHRoaXMuaW5kZXggPSBwYXJlbnQuY2hpbGRyZW4ubGVuZ3RoXG4gICAgICB0aGlzLmxheWVyID0gcGFyZW50LmxheWVyICsgT2Zmc2V0Lk5leHQgfHwgbGF5ZXJcbiAgICAgIHBhcmVudC5jaGlsZHJlbi5wdXNoKHRoaXMpXG4gICAgfVxuXG4gICAgdGhpcy5lbGVtLnRhYkluZGV4ID0gLTEgLy8gaW4gb3JkZXIgdG8gbmF2aWdhdGUgcHJvZ3JhbW1hdGljYWxseSBhbmQgZWxlbS5mb2N1cygpIHdvcmtzXG4gICAgdGhpcy5lbGVtLmRhdGFzZXRbTmF2SXRlbURhdGFBdHRycy5OYXZMYWJlbF0gPSB0aGlzLmVsZW0uZGF0YXNldFtOYXZJdGVtRGF0YUF0dHJzLk5hdkxhYmVsXSB8fCBgbGF5ZXI6ICR7dGhpcy5sYXllcn0gSW5kZXg6ICR7dGhpcy5pbmRleH1gXG4gIH1cblxuICBwdWJsaWMgZ2V0IHR5cGUoKTogc3RyaW5nIHwgbnVsbCB7XG4gICAgcmV0dXJuIHRoaXMuZWxlbS5kYXRhc2V0W05hdkl0ZW1EYXRhQXR0cnMuTmF2VHlwZV0gfHwgbnVsbFxuICB9XG5cbiAgcHVibGljIGdldCBsYWJlbCgpOiBzdHJpbmcgfCBudWxsIHtcbiAgICByZXR1cm4gdGhpcy5lbGVtLmRhdGFzZXRbTmF2SXRlbURhdGFBdHRycy5OYXZMYWJlbF0gfHwgbnVsbFxuICB9XG5cbiAgcHVibGljIGdldCBpc0FjdGl2ZSgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gQm9vbGVhbih0aGlzLmVsZW0uZGF0YXNldFtOYXZJdGVtRGF0YUF0dHJzLkFjdGl2ZU5hdkl0ZW1dKVxuICB9XG5cbiAgcHVibGljIGhhc1R5cGUodHlwZTogTmF2SXRlbVR5cGVzKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMudHlwZSA9PT0gdHlwZVxuICB9XG5cbiAgcHVibGljIGdldENoaWxkTm9kZShpbmRleDogbnVtYmVyKTogTmF2VHJlZU5vZGUgfCBudWxsIHtcbiAgICByZXR1cm4gdGhpcy5jaGlsZHJlbltpbmRleF0gfHwgbnVsbFxuICB9XG5cbiAgcHVibGljIGdldEZpcnN0Q2hpbGROb2RlKCk6IE5hdlRyZWVOb2RlIHwgbnVsbCB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0Q2hpbGROb2RlKDApXG4gIH1cblxuICBwdWJsaWMgc3RhdGljIGhhc05hdlR5cGVBdHRyaWJ1dGUoZWxlbTogSFRNTEVsZW1lbnQpOiBib29sZWFuIHtcbiAgICByZXR1cm4gQm9vbGVhbihlbGVtLmRhdGFzZXRbTmF2SXRlbURhdGFBdHRycy5OYXZUeXBlXSlcbiAgfVxuXG4gIHB1YmxpYyBhY3RpdmF0ZSgpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuaXNBY3RpdmUgJiYgdGhpcy50eXBlID09PSBOYXZJdGVtVHlwZXMuSXRlbSkge1xuICAgICAgdGhpcy5lbGVtLmRhdGFzZXRbTmF2SXRlbURhdGFBdHRycy5BY3RpdmVOYXZJdGVtXSA9ICd0cnVlJ1xuICAgICAgdGhpcy5lbGVtLmZvY3VzKClcbiAgICAgIHRoaXMuZWxlbS5zY3JvbGxJbnRvVmlldyh7IGJsb2NrOiAnY2VudGVyJywgaW5saW5lOiAnY2VudGVyJywgYmVoYXZpb3I6ICdzbW9vdGgnIH0pIC8vIHNjcm9sbCB0byBhIGZvY3VzZWQgZWxlbWVudCB3aGVuIHdlIGhhdmUgYSBzY3JvbGxcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgZGVhY3RpdmF0ZSgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5pc0FjdGl2ZSkge1xuICAgICAgdGhpcy5lbGVtLmJsdXIoKVxuICAgICAgZGVsZXRlIHRoaXMuZWxlbS5kYXRhc2V0W05hdkl0ZW1EYXRhQXR0cnMuQWN0aXZlTmF2SXRlbV1cbiAgICB9XG4gIH1cbn1cbiIsImltcG9ydCBOYXZUcmVlIGZyb20gJy4vTmF2VHJlZSdcbmltcG9ydCBOYXZUcmVlSHRtbE9ic2VydmVyIGZyb20gJy4vb2JzZXJ2ZXJzL05hdlRyZWVIdG1sT2JzZXJ2ZXInXG5pbXBvcnQgTmF2VHJlZUNsaWNrT2JzZXJ2ZXIgZnJvbSAnLi9vYnNlcnZlcnMvTmF2VHJlZUNsaWNrT2JzZXJ2ZXInXG5pbXBvcnQgTmF2VHJlZUtleVByZXNzT2JzZXJ2ZXIgZnJvbSAnLi9vYnNlcnZlcnMvTmF2VHJlZUtleVByZXNzT2JzZXJ2ZXInXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE5hdmlnYXRvciB7XG4gIHB1YmxpYyBuYXZUcmVlOiBOYXZUcmVlIHwgbnVsbCA9IG51bGxcbiAgcHVibGljIG5hdlRyZWVIdG1sT2JzZXJ2ZXIgPSBuZXcgTmF2VHJlZUh0bWxPYnNlcnZlcigpXG4gIHB1YmxpYyBuYXZUcmVlQ2xpY2tPYnNlcnZlciA9IG5ldyBOYXZUcmVlQ2xpY2tPYnNlcnZlcigpXG4gIHB1YmxpYyBuYXZUcmVlS2V5UHJlc3NPYnNlcnZlciA9IG5ldyBOYXZUcmVlS2V5UHJlc3NPYnNlcnZlcigpXG5cbiAgcHVibGljIG9ic2VydmUoZWxlbTogSFRNTEVsZW1lbnQpOiB2b2lkIHtcbiAgICBpZiAoIWVsZW0uaXNFcXVhbE5vZGUodGhpcy5uYXZUcmVlICYmIHRoaXMubmF2VHJlZS5lbGVtKSkge1xuICAgICAgdGhpcy5uYXZUcmVlID0gbmV3IE5hdlRyZWUoZWxlbSlcbiAgICAgIHRoaXMubmF2VHJlZUh0bWxPYnNlcnZlci53YXRjaCh0aGlzLm5hdlRyZWUpXG4gICAgICB0aGlzLm5hdlRyZWVDbGlja09ic2VydmVyLndhdGNoKHRoaXMubmF2VHJlZSlcbiAgICAgIHRoaXMubmF2VHJlZUtleVByZXNzT2JzZXJ2ZXIud2F0Y2godGhpcy5uYXZUcmVlKVxuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBhY3RpdmF0ZU5hdkl0ZW0obGFiZWw6IHN0cmluZyk6IHZvaWQge1xuICAgIHRoaXMubmF2VHJlZT8uYWN0aXZhdGVOb2RlKGxhYmVsKVxuICB9XG5cbiAgcHVibGljIGRlYWN0aXZhdGVOYXZJdGVtKCk6IHZvaWQge1xuICAgIHRoaXMubmF2VHJlZT8uZGVhY3RpdmF0ZU5vZGUoKVxuICB9XG59XG5cbi8vIFRPRE86IGltcGxlbWVudCB3aXRob3V0IGJ1aWxkaW5nIHRyZWUsIGp1c3Qgc2V0IGRhdGEgYXR0cmlidXRlcyBhbmQgdGVzdCBzcGVlZFxuIiwiaW1wb3J0IE5hdmlnYXRvciBmcm9tICcuL05hdmlnYXRvcidcblxuZGVjbGFyZSBnbG9iYWwge1xuICBpbnRlcmZhY2UgV2luZG93IHtcbiAgICBIdG1sRG9tTmF2aWdhdG9yOiBOYXZpZ2F0b3I7XG4gIH1cbn1cblxuaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XG4gIHdpbmRvdy5IdG1sRG9tTmF2aWdhdG9yID0gbmV3IE5hdmlnYXRvcigpXG59XG4iLCJpbXBvcnQgTmF2VHJlZU5vZGUsIHsgTmF2SXRlbURhdGFBdHRycywgTmF2SXRlbVR5cGVzIH0gZnJvbSAnLi4vTmF2VHJlZU5vZGUnXG5cbmV4cG9ydCBpbnRlcmZhY2UgSU5hdlRyZWVDbGlja09ic2VydmFibGUge1xuICBhY3RpdmF0ZU5vZGUobm9kZTogc3RyaW5nIHwgTmF2VHJlZU5vZGUpOiB2b2lkXG59XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE5hdlRyZWVDbGlja09ic2VydmVyIHtcbiAgcHJpdmF0ZSBvYnNlcnZhYmxlOiBJTmF2VHJlZUNsaWNrT2JzZXJ2YWJsZSB8IG51bGwgPSBudWxsXG5cbiAgcHVibGljIHdhdGNoID0gKG9ic2VydmFibGU6IElOYXZUcmVlQ2xpY2tPYnNlcnZhYmxlKTogdm9pZCA9PiB7XG4gICAgdGhpcy51bndhdGNoKClcblxuICAgIHRoaXMub2JzZXJ2YWJsZSA9IG9ic2VydmFibGVcbiAgICB3aW5kb3cub25jbGljayA9IHRoaXMub25DbGlja0V2ZW50RGV0ZWN0ZWRcbiAgfVxuXG4gIHB1YmxpYyBvbkNsaWNrRXZlbnREZXRlY3RlZCA9IChldmVudDogTW91c2VFdmVudCk6IHZvaWQgPT4ge1xuICAgIGNvbnN0IGVsZW0gPSAoZXZlbnQudGFyZ2V0IGFzIEhUTUxFbGVtZW50KS5jbG9zZXN0PEhUTUxFbGVtZW50PihgW2RhdGEtbmF2PVwiJHtOYXZJdGVtVHlwZXMuSXRlbX1cIl1gKVxuXG4gICAgaWYgKCFlbGVtKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICB0aGlzLm9ic2VydmFibGU/LmFjdGl2YXRlTm9kZShlbGVtLmRhdGFzZXRbTmF2SXRlbURhdGFBdHRycy5OYXZMYWJlbF0gYXMgc3RyaW5nKVxuICB9XG5cbiAgcHVibGljIHVud2F0Y2ggPSAoKTogdm9pZCA9PiB7XG4gICAgd2luZG93Lm9uY2xpY2sgPSBudWxsXG4gICAgdGhpcy5vYnNlcnZhYmxlID0gbnVsbFxuICB9XG59XG4iLCJleHBvcnQgaW50ZXJmYWNlIElOYXZUcmVlSHRtbE9ic2VydmFibGUge1xuICBlbGVtOiBIVE1MRWxlbWVudFxuXG4gIHJlYnVpbGQoKTogdm9pZFxufVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBOYXZUcmVlSHRtbE9ic2VydmVyIHtcbiAgcHJpdmF0ZSBvYnNlcnZlcjogTXV0YXRpb25PYnNlcnZlciB8IG51bGwgPSBudWxsXG4gIHByaXZhdGUgb2JzZXJ2YWJsZTogSU5hdlRyZWVIdG1sT2JzZXJ2YWJsZSB8IG51bGwgPSBudWxsXG4gIHByaXZhdGUgb2JzZXJ2ZXJDb25maWc6IE11dGF0aW9uT2JzZXJ2ZXJJbml0ID0ge1xuICAgIGF0dHJpYnV0ZXM6IHRydWUsXG4gICAgY2hpbGRMaXN0OiB0cnVlLFxuICAgIHN1YnRyZWU6IHRydWUsXG4gICAgYXR0cmlidXRlRmlsdGVyOiBbJ2RhdGEtbmF2J10sXG4gIH1cblxuICBwdWJsaWMgd2F0Y2ggPSAob2JzZXJ2YWJsZTogSU5hdlRyZWVIdG1sT2JzZXJ2YWJsZSk6IHZvaWQgPT4ge1xuICAgIHRoaXMudW53YXRjaCgpXG5cbiAgICB0aGlzLm9ic2VydmFibGUgPSBvYnNlcnZhYmxlXG4gICAgdGhpcy5vYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKHRoaXMub25IdG1sQ2hhbmdlRGV0ZWN0ZWQpXG4gICAgdGhpcy5vYnNlcnZlci5vYnNlcnZlKHRoaXMub2JzZXJ2YWJsZS5lbGVtLCB0aGlzLm9ic2VydmVyQ29uZmlnKVxuICB9XG5cbiAgcHVibGljIG9uSHRtbENoYW5nZURldGVjdGVkID0gKCk6IHZvaWQgPT4ge1xuICAgIHRoaXMub2JzZXJ2YWJsZT8ucmVidWlsZCgpXG4gIH1cblxuICBwdWJsaWMgdW53YXRjaCA9ICgpOiB2b2lkID0+IHtcbiAgICB0aGlzLm9ic2VydmVyPy5kaXNjb25uZWN0KClcbiAgICB0aGlzLm9ic2VydmVyID0gbnVsbFxuICAgIHRoaXMub2JzZXJ2YWJsZSA9IG51bGxcbiAgfVxufVxuIiwiZXhwb3J0IGludGVyZmFjZSBJTmF2VHJlZUtleVByZXNzT2JzZXJ2YWJsZSB7XG4gIHVwKCk6IHZvaWRcbiAgZG93bigpOiB2b2lkXG4gIGxlZnQoKTogdm9pZFxuICByaWdodCgpOiB2b2lkXG59XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE5hdlRyZWVLZXlQcmVzc09ic2VydmVyIHtcbiAgcHJpdmF0ZSBvYnNlcnZhYmxlOiBJTmF2VHJlZUtleVByZXNzT2JzZXJ2YWJsZSB8IG51bGwgPSBudWxsXG4gIHByaXZhdGUgY29udHJvbHM6IFJlY29yZDxzdHJpbmcsICgpID0+IHZvaWQ+ID0ge1xuICAgIEFycm93VXA6ICgpID0+IHRoaXMub2JzZXJ2YWJsZT8udXAoKSxcbiAgICBBcnJvd0Rvd246ICgpID0+IHRoaXMub2JzZXJ2YWJsZT8uZG93bigpLFxuICAgIEFycm93TGVmdDogKCkgPT4gdGhpcy5vYnNlcnZhYmxlPy5sZWZ0KCksXG4gICAgQXJyb3dSaWdodDogKCkgPT4gdGhpcy5vYnNlcnZhYmxlPy51cCgpLFxuICB9XG5cbiAgcHVibGljIHdhdGNoID0gKG9ic2VydmFibGU6IElOYXZUcmVlS2V5UHJlc3NPYnNlcnZhYmxlKTogdm9pZCA9PiB7XG4gICAgdGhpcy51bndhdGNoKClcblxuICAgIHRoaXMub2JzZXJ2YWJsZSA9IG9ic2VydmFibGVcbiAgICB3aW5kb3cub25rZXlwcmVzcyA9IHRoaXMub25LZXlFdmVudERldGVjdGVkXG4gIH1cblxuICBwdWJsaWMgb25LZXlFdmVudERldGVjdGVkID0gKGV2ZW50OiBLZXlib2FyZEV2ZW50KTogdm9pZCA9PiB7XG4gICAgY29uc3QgaGFuZGxlciA9IHRoaXMuY29udHJvbHNbZXZlbnQua2V5XVxuICAgIGlmIChoYW5kbGVyKSB7XG4gICAgICBoYW5kbGVyKClcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgdW53YXRjaCA9ICgpOiB2b2lkID0+IHtcbiAgICB3aW5kb3cub25rZXlwcmVzcyA9IG51bGxcbiAgICB0aGlzLm9ic2VydmFibGUgPSBudWxsXG4gIH1cbn1cbiIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdGlmKF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0pIHtcblx0XHRyZXR1cm4gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiLy8gc3RhcnR1cFxuLy8gTG9hZCBlbnRyeSBtb2R1bGVcbi8vIFRoaXMgZW50cnkgbW9kdWxlIGlzIHJlZmVyZW5jZWQgYnkgb3RoZXIgbW9kdWxlcyBzbyBpdCBjYW4ndCBiZSBpbmxpbmVkXG5fX3dlYnBhY2tfcmVxdWlyZV9fKDYwNyk7XG4iXSwic291cmNlUm9vdCI6IiJ9